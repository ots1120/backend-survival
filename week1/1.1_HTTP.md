# 1.1 HTTP의 이해

### HTTP(Hypertext Transfer Protocol)

- 7계층 응용 계층의 프로토콜
- 프로토콜이란 ? : 규칙의 집합, 규약, 약속
- HTTP란 ? : TML과 같은 하이퍼미디어 문서를 전송할 때 지켜야할 규약, 약속

### HTTP와 HTTPS의 차이(TLS)

- TLS라는 보안 계층이 추가돼서 암호화된 TCP 연결로 데이터가전송되면 HTTPS, 보통의 TCP로 전송되면 HTTP
- TLS란? : 암호화된 TCP 연결
  - 전송 계층 보안(Transport Layer Security) : 어플리케이션들이 네트워크 상에서 안전하게 통신하기 위해 사용되는 프로토콜이다.&#x20;
  - SSL, TLS 모두 네트워크 상에서 보안을 제공하는 암호화 프로토콜을 사용해 네트워크에 보안을 제공함으로써 통신 개인정보 보호를 보장하는 클라이언트 & 서버 프로토콜이다.

### 클라이언트-서버 모델

- 클라이언트-서버 모델은 네트워크 아키텍처에서 매우 일반적, 전통적인 모델이다.&#x20;
- 이 모델은 클라이언트와 서버의 상호작용을 기초로 하며, 클라이언트는 서비스를 요청하고, 서버는 해당 서비스를 제공하는 구조다.
- 서비스를 구체화한 것은 **리소스이며 클라이언트는 서버에게 특정 리소스를 요청할 때 리소스의 위치를 가리키는 URL(Uniform Resource Locator)을 사용하여 요청한다.**
  - 리소스는 HTTP 요청 대상이라고도 하며 문서, 사진 등 어떤 것이든 될 수 있다는 특성이 있다.
  - 각 리소스는 리소스 식별을 위해 HTTP 전체에 사용되는 URI(Uniform Resource Identifier)로 식별된다.
  - URL(Uniform Resource Locator)은가장 일반적인 URI 형식이다.
- 서버는 클라이언트로부터 받은 요청에 대해 처리한 뒤, 클라이언트에게 응답한다.

### stateless와 stateful

- HTTP는 대표적인 무상태(Stateless) 프로토콜이다.
- HTTP를 사용하는 모든 요청들은 독립적이다.
  - 독립적이다? : 요청을 할 때마다 항상 내가 누군지 알려줘야 한다.
  - 계속 알려줘야 하는 것은 불편하다 -> 요청자 정보를 서버가 가지고 있을 수 있도록 해서 불편함을 없애주려는 도구들이 개발되었는데, 이를 쿠키, 세션 등이라 한다.

### HTTP Cookie와 HTTP Session

- 쿠키와 세션을 사용하는 이유?
  - 목적 : HTTP 프로토콜의 특징이자 약점 보완
  - HTTP 프로토콜의 특징
    1. Connectionless 프로토콜 (비연결 지향) : HTTP 프로토콜은 클라이언트가 서버에 요청(Request)을 했을 때, 그 요청에 맞는 응답(Response)을 보낸 후 연결을 끊는 처리 방식
    2. Stateless 프로토콜 : 커넥션을 끊는 순간 클라이언트와 서버의 통신이 끝나며 상태 정보는 유지하지 않는 특성
  - 정보가 유지되지 않으면, 매번 페이지를 이동할 때마다 로그인을 다시 하거나, 상품을 선택했는데 구매 페이지에서 선택한 상품의 정보가 없거나 하는 등의 일이 발생할 수 있다.
  - 따라서, Stateful 경우를 대처하기 위해 쿠키와 세션을 사용한다.
- 쿠키와 세션의 차이점;
  - 쿠키와 세션은 비슷한 역할을 하며, 동작 원리도 비슷하다. 세션도 결국 쿠키를 사용하기 때문이다.
  - 상태 정보의 저장 위치
    - 쿠키 : 클라이언트(로컬 PC) -> 서버의 자원을 전혀 사용하지 않는다.
    - 세션 : 서버 -> 서버의 자원을 사용한다.
  - 보안
    - 쿠키는 클라이언트 로컬에 저장되기 때문에 변질되거나 request에서 스니핑 당할 우려가 있어 보안에 취약하다.
    - 반면에 세션은 쿠키를 이용해서 session-id만 저장하고, session-id를 통해 구분하여 서버에서 처리하기 때문에 비교적 보안성이 높다.
  - 속도
    - 쿠키는 쿠키 자체에 정보가 있기 때문에, 서버에 요청 시 속도가 빠르다.
    - 세션은 정보가 서버에 있기 때문에 처리가 요구되어 비교적 느린 속도를 낸다.
  - 라이프 사이클
    - 쿠키는 만료기간이 있지만 파일로 저장되기 때문에, 브라우저를 종료해도 정보가 유지될 수 있다. 또한 만료기간을 따로 지정해 쿠키를 삭제할 때까지 유지할 수도 있다.
    - 세션도 만료기간을 정할 수 있지만, 브라우저가 종료되면 만료기간에 상관없이 삭제된다.

#### HTTP Cookie

- HTTP 쿠키는 서버가 사용자의 웹 브라우저에 전송하는 작은 데이터 조각이다.
- 브라우저는 그 데이터 조각들을 로컬 pc에저장해 놓았다가, 동일한 서버에 재 요청 시 저장된 데이터(나임을 식별할 수 있게 해주는)를 함께 전송한다.
- 쿠키는 두 요청이 동일한 브라우저에서 들어왔는지 아닌지를 판단할 때 주로 사용한다.&#x20;
- 상태가 없는 HTTP 프로토콜에서 상태 정보를 기억시켜주기 때문에 사용자의 로그인 상태를 유지할 수 있다.

#### HTTP Session

- 일정 시간 동안 같은 사용자(브라우저)로부터 들어오는 일련의 요구를 하나의 상태로 보고, 그 상태를 유지시키는 기술이다.
- 여기서 일정 시간은 방문자가 웹브라우저를 통해 웹 서버에 접속한 시점부터 웹 브라우저를 종료하여 연결을 끝내는 시점을 말한다.
- 즉, 방문자가 웹 서버에 접속해 있는 상태를 하나의 단위로 보고 그것을 세션이라고 한다.
- 캐시란? : 웹페이지 요소를 저장하기 위한 임시 저장소

- 웹 페이지를 빠르게 렌더링할 수 있도록 도와준다.
- 이미지, 오디오, 비디오, css, js파일 등 데이터나 값을 미리 복사해 놓는 리소스 파일들의 임시저장소이다.
- 저장 공간이 작고 비용이 비싼 대신 빠른 성능을 제공한다.

### HTTP 메시지

- HTTP 메시지는 서버와 클라이언트 간에 데이터가 교환되는 방식
- 메시지 타입은 두가지로, 요청 및 응답이 있다.
- 요청은 클라이언트가 서버로 전달해서 서브의 액션이 일어나게끔 하는 메시지
- 응답은 요청에 대한 서버의 답변
- HTTP 메시지는 ASCII로 인코딩 된 텍스트 정보이며, 여러 줄로 되어 있다.

#### HTTP 메시지 구조

- HTTP 메시지는 서버와 클라이언트 간에 데이터가 교환되는 방식이다.
- HTTP 메시지는 ASCII로 인코딩된 텍스트 정보이며, 1.1 버전까지는 사람이 읽을 수 있는 형태였다.
- HTTP 메시지 타입은 2가지로, 요청(request) & 응답(response)이다. 요청과 응답은 유사한 구조로 이루어져 있다.

#### HTTP 요청(Request)와 응답(Response)

- HTTP 요청과 응답의 구조(4개의 파트로 구성)

  1. 시작줄(Start Line) -> 요청과 응답의 형태가 다름

  - 실행되어야 할 요청, 또는 요청 수행에 대한 성공 또는 실패 -> 항상 한줄로 끝남

  2. HTTP 헤더

  - 요청에 대한 설명, 혹은 메시지 본문에 대한 설명

  3. 빈줄

  - 요청에 대한 모든 메타 정보가 전송되었음을 알리는 빈 줄이 삽입됨

  4. Body

  - 요청과 관련된 내용(HTML 폼 컨텐츠 등)이 옵션에 들어가거나, 응답과 관련된 문서가 들어간다. 본문의 존재 유무 및 크기는 첫 줄과 HTTP 헤더에 명시된다.

- HTTP 메시지의 시작 줄과 HTTP 헤더를 묶어서 요청 헤드라고 부르며, 이와 반대로 HTTP 메시지의 페이로드는 본문(Body)이라고 한다.

  - 크기를 알기 어렵다. Headers의 Content-Length 항목 등을 활용한다.
  - 위와 다르게 꼭 사람이 읽을 수 있는 텍스트 형태일 필요는 없다. 바이너리 등 가능
  - 하나가 아니라 여럿일 수도 있다. 파일 업로드 등을 위해 쓰이는 multipart/form-data가 대표적이다.

- multipart/form-data

  - multipart/form-data는 복수의 파트(parts)로 구성되며, 각 파트는 다른 데이터를 포함할 수 있다.
  - 파일 업로드 : 웹 폼을 통한 파일 업로드 시 multipart/form-data 를 사용해 파일 데이터와 폼의 다른 필드를 함께 전송 할 수 있다.
  - 복합적인 폼 데이터 전송 : 텍스트 필드와 함꼐 포함하는 폼 데이터를 전송할 때 사용된다.
  - 웹 브라우저가 보내는 HTTP 메시지는 Content-Type 속성이 multipart/form-data로 지정되고 정해진 형식에 따라 메시지를 인코딩하여 전송한다.
  - 이를 처리하기 위한 서버는 multipart 메시지에 대해 각 파트별로 분리하여 개별 파일의 정보를 얻게 된다.
  - 이미지 파일의 경우, 이미지 파일을 전송한다고 해서 png, jpg 파일 자체가 전송되는 것이 아니라 문자로 전송된다.
  - 이미지 파일을 문자로 생성하여 HTTP request body에 담아 서버로 전송하는 것이다.

#### HTTP 요청 메서드(HTTP request methods)

- HTTP는 요청 메서드를 정의하여, 주어진 리소스에 수행하길 원하는 행동을 나타낸다.
- 각각의 메서드는 서로 다른 의미를 구현하지만, 일부 기능은 메서드 집합 간에 서로 공유하기도 한다.
- 응답 메서드는 안전하거나, 캐시 가능하거나, 멱등성을 가질 수 있다.
- HTTP 요청 메서드의 종류

  - GET : Read
  - HEAD : GET without body
  - POST : Submit(멱등성X) -> collection Pattern에서 create로 사용
  - PUT : Update(+Create) -> Overwrite
  - DELETE : Delete
  - CONNECT
  - OPTIONS : 지원 확인
  - TRACE
  - PATCH : Update (partial) 멱등성 X

- 멱등성이란? : 동일한 요청을 한 번 보내는 것과 여러번 연속으로 보내는 것이 같은 효과를 지니고, 서버의 상태도 동일하게 남을 때, 해당 HTTP 메서드가 멱등성을 가졌다고 한다.
- 멱등성이 있는 메서드 : GET, PUT, DELETE, HEAD, OPTIONS, TRACE -> 이 메서드 모두 첫번째 요청 이후에는 동일한 요청이 와도 서버의 상태가 변화하지 않는다.
- 멱등성이 없는 메서드 : POST, PATCH -> POST 요청은 매번 새로운 자원을 생성할 수 있기 때문에, 같은 POST 요청을 여러번 보낼 경우 서버의 상태가 계속 변할 수 있다.

#### HTTP 응답 상태 코드(HTTP response status code)

HTTP 응답 상태 코드는 특정 HTTP 요청이 성공적으로 완료되었는지 알려준다. 응답은 5개 그룹으로 나뉘어져 있다.

1. 정보 응답(100번대) : 우리가 직접 쓰는 일은 드묾
2. 성공 응답(200번대) : 200 OK, 201 Create, 204 No Content
3. 리다이렉션 메시지(300번대) : 304 Not Modified가 특수한 형태로 자주 보임
4. 클라이언트 에러 응답(400번대) : 404 Not Found
5. 서버 에러 응답(500번대) : 500 Internal Server Error

#### 리다이렉션이란?

웹에서 클라이언트가 특정 URL로 요청을 보냈을 때, 해당 위치로 직접 응답을 제공하는 대신 다른 URL로 요청을 유도하는 방식을 의미한다.
